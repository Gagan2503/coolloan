<div class="content-container">
    <div class="card">
        <div class="content">
            <div class="toolbar">
                <h4>{{'label.heading.createguarantor' | translate}}</h4>
            </div>
            <br />
            <form class="form-horizontal form-extra" name="guaratorform" novalidate=""
                ng-controller="GuarantorController" ng-submit="submit()">
                <api-validate></api-validate>
                <fieldset>
                    <div class="form-group">
                        <div class="col-md-offset-2">
                            <md-checkbox ng-model="temp" ng-change="checkClient()">
                                {{'label.input.existingclient' | translate }}
                            </md-checkbox>
                        </div>
                    </div>
                    <div data-ng-switch on="temp">
                        <div data-ng-switch-when="true">
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.name' | translate }}<span
                                        class="required">*</span></label>

                                <div class="col-sm-3">
                                    <md-autocomplete md-selected-item="selectedItem" md-search-text="searchText"
                                        md-selected-item-change="selectedItemChange(item)"
                                        md-items="item in searchAll(searchText)" md-item-text="item.entityName"
                                        md-min-length="minLengthSearch" md-delay="100" md-escape-options="clear"
                                        placeholder="{{'label.selectone' | translate}}"
                                        input-aria-labelledby="selectedItem">
                                        <md-item-template>
                                            <span md-highlight-text="searchText"
                                                md-highlight-flags="^i">{{item.entityName}}</span>
                                        </md-item-template>
                                        <md-not-found>
                                            "{{searchText}}" {{'error.msg.not.found' | translate}}
                                        </md-not-found>
                                    </md-autocomplete>
                                </div>
                                <div class="col-sm-2">
                                    <span class="input-group-btn">
                                        <button ng-click="searchClients(searchText)" class="btn btn-primary form-control">
                                            <span class="fa fa-search"></span>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.relationship' | translate
                                    }}</label>

                                <div class="col-sm-3">
                                    <md-select id="relationship" ng-model="formData.relationship"
                                        placeHolder="{{'label.selectone' | translate}}">
                                        <md-option
                                            ng-repeat="type in template.allowedClientRelationshipTypes | orderBy:'name'"
                                            ng-value="type.id">{{type.name | translate}}</md-option>
                                    </md-select>
                                </div>
                            </div>
                        </div>
                        <div data-ng-switch-when="false">
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.relationship' | translate
                                    }}</label>

                                <div class="col-sm-3">
                                    <md-select id="relationship" ng-model="formData.relationship"
                                        placeHolder="{{'label.selectone' | translate}}">
                                        <md-option
                                            ng-repeat="type in template.allowedClientRelationshipTypes | orderBy:'name'"
                                            ng-value="type.id">{{type.name | translate}}</md-option>
                                    </md-select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2" for="firstname">{{'label.input.firstname' |
                                    translate }}<span class="required">*</span></label>

                                <div class="col-sm-3">
                                    <input type="text" id="firstname" name="firstname" ng-model="formData.firstname"
                                        class="form-control uppercase" ng-required="!temp" late-Validate />
                                </div>
                                <div class="col-sm-2">
                                    <form-validate valattributeform="guaratorform" valattribute="firstname" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.lastname' | translate }}<span
                                        class="required">*</span></label>

                                <div class="col-sm-3">
                                    <input id="lastname" type="text" name="lastname" ng-model="formData.lastname"
                                        class="form-control uppercase" ng-required="!temp" late-Validate />
                                </div>
                                <div class="col-sm-2">
                                    <form-validate valattributeform="guaratorform" valattribute="lastname" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.dob' | translate }}</label>

                                <div class="col-sm-3">
                                    <md-datepicker id="submittedOnDate" ng-model="date.first"
                                        md-placeholder="{{'label.selecttodate' | translate}}" md-min-date="minDate"
                                        md-max-date="restrictDate">
                                    </md-datepicker>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.address' | translate }}</label>

                                <div class="col-sm-3">
                                    <input id="addressline1" type="text" placeholder="Line 1"
                                        class="form-control uppercase" ng-model="formData.addressLine1">
                                </div>
                                <div class="col-sm-3">
                                    <input id="addressline2" type="text" placeholder="Line 2"
                                        class="form-control uppercase" ng-model="formData.addressLine2">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.city' | translate }}</label>

                                <div class="col-sm-3">
                                    <input id="city" type="text" class="form-control uppercase"
                                        ng-model="formData.city">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.zip' | translate }}</label>

                                <div class="col-sm-3">
                                    <input type="text" id="zip" only-number allow-decimal="false" allow-negative="false"
                                        name="zip" minlength="5" maxlength="5" ng-model="formData.zip"
                                        class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.mobile' | translate }}</label>

                                <div class="col-sm-3">
                                    <input id="mobile" phone-number minlength="10" maxlength="10" type="text"
                                        class="form-control" ng-model="formData.mobile">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.input.residence' | translate }}</label>

                                <div class="col-sm-3">
                                    <input id="residence" type="text" class="form-control uppercase"
                                        ng-model="formData.residence">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div data-ng-show="clientview">
                        <h3>{{'label.heading.clientdetails' | translate}}</h3>
                        <div class="form-group">
                            <label class="control-label col-sm-2">{{'label.heading.id' | translate}}</label>
                            <label class="col-sm-2">{{client.entityId}}</label>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">{{'label.heading.name' | translate}}</label>
                            <label class="col-sm-2">{{client.entityName}}</label>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">{{'label.input.accountNo' | translate}}</label>
                            <label class="col-sm-2">{{client.entityAccountNo}}</label>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">{{'label.heading.office' | translate}}</label>
                            <label class="col-sm-2">{{client.parentName}}</label>
                        </div>
                        <!-- <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.heading.activationdate' | translate}}</label>
                                <label class="col-sm-2">{{client.activationDate | DateFormat}}</label>
                            </div> -->

                        <div class="form-group" data-ng-show="!accounts">
                            <label class="control-label col-sm-4" for="savingsId">{{'no.aviable.active.saving.account' |
                                translate }}</label>
                        </div>

                        <div class="form-group" data-ng-show="accounts">
                            <label class="control-label col-sm-2" for="savingsId">{{'label.input.account' | translate
                                }}</label>

                            <div class="col-sm-3">
                                <md-select id="savingsId" ng-model="formData.savingsId" name="savingsId">
                                    <md-option ng-repeat="savingsAccount in accounts" ng-value="savingsAccount.id">
                                        {{savingsAccount.productName}} - {{savingsAccount.accountNo}}
                                    </md-option>
                                </md-select>
                                <form-validate valattributeform="guaratorform" valattribute="savingsId" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-sm-2">{{'label.input.amount' | translate }}</label>

                            <div class="col-sm-3">
                                <input id="amount" type="text" name="amount" ng-model="formData.amount"
                                    class="form-control" ng-required="formData.savingsId" only-number
                                    allow-decimal="true" allow-negative="false" />
                                <form-validate valattributeform="guaratorform" valattribute="amount" />
                            </div>
                        </div>

                        <div class="col-md-12 center">
                            <md-button href="#!/viewloanaccount/{{loanId}}" class="md-raised">CANCELAR</md-button>
                            <md-button id="save" type="submit" class="md-raised md-primary"
                                has-permission='CREATE_GUARANTOR'>{{'label.button.save' | translate }}</md-button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>